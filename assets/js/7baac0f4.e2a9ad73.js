"use strict";(self.webpackChunkshape_z_docs=self.webpackChunkshape_z_docs||[]).push([[457],{5172:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"distance","title":"Distance Functions","description":"Shape-Z supports a variety of signed distance functions (SDFs) for modeling volumetric geometry. Most of these (e.g., Cylinder, RectFrustum, NgonFrustum, Cone, Capsule, Vesica, BoxBetween) are defined between two points, via a from and to vector. Others, like Sphere and Box, are defined via an at position and their size in u, v, d coordinates.","source":"@site/docs/distance.mdx","sourceDirName":".","slug":"/distance","permalink":"/docs/distance","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Quick Start Guide","permalink":"/docs/quick_start"}}');var o=n(4848),d=n(8453);const c={sidebar_position:3},t="Distance Functions",r={},l=[{value:"<code>volume { ... }</code>",id:"volume---",level:4},{value:"<code>profile_offset { ... }</code>",id:"profile_offset---",level:4},{value:"<code>profile_scale { ... }</code>",id:"profile_scale---",level:4}];function a(e){const s={code:"code",h1:"h1",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"distance-functions",children:"Distance Functions"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Shape-Z"})," supports a variety of signed distance functions (SDFs) for modeling volumetric geometry. Most of these (e.g., ",(0,o.jsx)(s.code,{children:"Cylinder"}),", ",(0,o.jsx)(s.code,{children:"RectFrustum"}),", ",(0,o.jsx)(s.code,{children:"NgonFrustum"}),", ",(0,o.jsx)(s.code,{children:"Cone"}),", ",(0,o.jsx)(s.code,{children:"Capsule"}),", ",(0,o.jsx)(s.code,{children:"Vesica"}),", ",(0,o.jsx)(s.code,{children:"BoxBetween"}),") are defined ",(0,o.jsx)(s.strong,{children:"between two points"}),", via a ",(0,o.jsx)(s.code,{children:"from"})," and ",(0,o.jsx)(s.code,{children:"to"})," vector. Others, like ",(0,o.jsx)(s.code,{children:"Sphere"})," and ",(0,o.jsx)(s.code,{children:"Box"}),", are defined via an ",(0,o.jsx)(s.code,{children:"at"})," position and their size in ",(0,o.jsx)(s.code,{children:"u"}),", ",(0,o.jsx)(s.code,{children:"v"}),", ",(0,o.jsx)(s.code,{children:"d"})," coordinates."]}),"\n",(0,o.jsxs)(s.p,{children:["Inside any ",(0,o.jsx)(s.code,{children:"distance"})," block, the system redefines ",(0,o.jsx)(s.code,{children:"u"}),", ",(0,o.jsx)(s.code,{children:"v"}),", and ",(0,o.jsx)(s.code,{children:"d"})," as ",(0,o.jsx)(s.strong,{children:"normalized coordinates"})," in ",(0,o.jsx)(s.code,{children:"[0,1]"}),", relative to the shape\u2019s own coordinate space:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"d"}),": normalized axial position along the shape (0 at ",(0,o.jsx)(s.code,{children:"from"}),", 1 at ",(0,o.jsx)(s.code,{children:"to"}),")"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"u"}),", ",(0,o.jsx)(s.code,{children:"v"}),": normalized horizontal and vertical coordinates within the local cross-section at each ",(0,o.jsx)(s.code,{children:"d"})]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"This normalized domain makes it easy to create reusable, size-independent patterns and deformations."}),"\n",(0,o.jsx)(s.h4,{id:"volume---",children:(0,o.jsx)(s.code,{children:"volume { ... }"})}),"\n",(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"volume"})," block defines what should be placed ",(0,o.jsx)(s.strong,{children:"inside"})," the shape. The system only evaluates this block for voxels that fall within the SDF (i.e., inside the shape boundary), and it gives access to the normalized ",(0,o.jsx)(s.code,{children:"u"}),", ",(0,o.jsx)(s.code,{children:"v"}),", ",(0,o.jsx)(s.code,{children:"d"})," as well as the SDF value ",(0,o.jsx)(s.code,{children:"inside"})," in world units."]}),"\n",(0,o.jsx)(s.p,{children:"Example:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-c",children:"if inside < 0.1 && d < 0.8 {\n    Whiskey;\n}\n"})}),"\n",(0,o.jsx)(s.h4,{id:"profile_offset---",children:(0,o.jsx)(s.code,{children:"profile_offset { ... }"})}),"\n",(0,o.jsxs)(s.p,{children:["This optional block allows you to modify the shape's surface by ",(0,o.jsx)(s.strong,{children:"adding or removing thickness"}),". It returns a world-unit offset that is subtracted from the computed SDF."]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["A positive return value ",(0,o.jsx)(s.strong,{children:"shrinks"})," the shape."]}),"\n",(0,o.jsxs)(s.li,{children:["A negative return value ",(0,o.jsx)(s.strong,{children:"expands"})," the shape."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"Example:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-rust",children:"let ang  = atan2(v - 0.5, u - 0.5);\nlet face = cos(ang * 4.0);\nlet bell = 1.0 - pow(2.0 * abs(d - 0.5), 2.0);\n-0.05 * face * bell;\n"})}),"\n",(0,o.jsxs)(s.p,{children:["This adds fourfold symmetric bulges to the sides of the shape, strongest around the center (",(0,o.jsx)(s.code,{children:"d = 0.5"}),")."]}),"\n",(0,o.jsx)(s.h4,{id:"profile_scale---",children:(0,o.jsx)(s.code,{children:"profile_scale { ... }"})}),"\n",(0,o.jsxs)(s.p,{children:["This block allows the shape\u2019s cross-section to be ",(0,o.jsx)(s.strong,{children:"scaled"})," per voxel before the SDF is computed. The return value is a ",(0,o.jsx)(s.strong,{children:"scale factor"})," applied to ",(0,o.jsx)(s.code,{children:"u"})," and ",(0,o.jsx)(s.code,{children:"v"})," dimensions (not ",(0,o.jsx)(s.code,{children:"d"}),")."]}),"\n",(0,o.jsx)(s.p,{children:"Example:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-rust",children:"1.0 - 0.2 * smoothstep(0.0, 1.0, d);\n"})}),"\n",(0,o.jsxs)(s.p,{children:["This line gradually scales down the cross-section toward the ",(0,o.jsx)(s.code,{children:"to"})," end of the shape."]})]})}function h(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>t});var i=n(6540);const o={},d=i.createContext(o);function c(e){const s=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),i.createElement(d.Provider,{value:s},e.children)}}}]);